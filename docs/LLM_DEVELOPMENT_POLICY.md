# 開発ポリシー

このファイルは開発にかかわるLLMエージェントが開発中に絶対に遵守すべきポリシーを定義しています。
- **人間が直接コードを生成または修正する場合は本ポリシーは適用されません。**
- **ユーザーが直接編集するか、ユーザーからの明確な指示がない限り、これらのポリシーは変更・解除できません。**
- **コード作成するLLMエージェントは現在のプロジェクトのすべての作業に当たり以下のポリシーの厳守を必須とします。**
- **本文中で矛盾は生じた場合はより前項に記載されている内容を優先する。**
- 一度承認されたタスク、ウォークスルーファイルの内容を削除することを禁じます。変更があった場合は、変更箇所が分かるように取り消し線などを活用し履歴が把握できるように変更すること。
- エージェントは思考、処理、作業を行うたびに本ポリシーの内容の優先度が下がっていってしまう場合は、作業のたびにポリシーの全文を把握、確認してから作業を行うこと。
- 本ポリシーに矛盾した指示がユーザーからあった場合は、必ずユーザーにポリシー違反の旨を必ず説明し、それでもユーザーが明確に了承した場合にのみ、ユーザーの指示に従う。
- 本ポリシーの順守は重要です。疑問点、矛盾点がある場合はその旨をユーザーに説明し、必ず事前にユーザーの確認を仰ぐこと。
（本文の矛盾、不明点が指摘された場合はユーザーは矛盾点、不明点を直ちに是正すること）

## 開発管理ファイルとその保存場所
コード生成の際に以下のファイルを参照する。
同名ファイルが複数ある場合は下記のもののみ使用すること。

- 開発管理ファイル保存場所
    /doc/
- 本ポリシー
    /doc/LLM_DEVELOPMENT_POLICY.md
- 開発タスク
    /doc/Task.md
- 実装計画
    /doc/implementation_plan.md
- ウォークスルー
    /doc/walkthrough.md
- 設計書
    /doc/design.md
LLM開発ログ
    /LLM_Agent_Logs/

## 必須ポリシー

### 1. コード生成ポリシー
- コード生成は、ユーザーの指示に従って行うこと

### 2. 言語ポリシー
- 返答、指示、設計書、タスク、プラン、思考プロセスの表示、コード内のコメントは**全て日本語**で行うこと
- 例外: UIのボタンなどに使う簡単な単語レベルの英語は使用可

### 3. 計画・進捗管理ポリシー
- 新しいプロジェクトに着手する場合：
  - コード生成に先立ち、完成までの全ての作業を想定し全ての作業をフェーズごとに分類し記載した開発タスク（Task.md）ファイルを作成すること。作成するタスクファイルは進捗管理可能なものとすること
  - 前項で作成したタスクに基づき、開発ウォークスルー(Walkthrough.md)ファイルおよび実装計画(implementation_plan.md)ファイルを作成すること。
  - 作成したタスク、ウォークスルー、プランファイルをユーザーが全て承認を行わないとコード生成は行えないものとする。
  - 承認されたタスク、ウォークスルー、プランファイルは各々のファイルに承認済みの記載を行うこと。
  - 承認済みのファイルは容易に内容の削除を行わないこと。変更があった場合は、変更箇所が分かるように取り消し線などを活用し履歴が把握できるように変更することとする。ただし、新しフェーズに着手する際の開発計画(implementation_plan.md)の内容更新作業は例外とする。
- 現在のフェーズをクローズする場合：
  - Task.mdファイルに記載してある現在のフェーズのタスクが全て終了またはキャンセルされていない場合はフェーズクローズできないものとする。
  - フェーズクローズの際は必ず、ユーザーの承認を得る必要があります。
  - フェーズクローズの際は必ず、開発ウォークスルーファイルを更新し、追加されたファイル（ツリー形式）、修正されたファイル、削除したファイル（ツリー形式）、該当フェーズで行った主要作業の内容を必ず記載すること。
- 新しいフェーズに着手する場合：
  - 前のフェーズがクローズされていない場合はいかなる場合でも、新しいフェーズに着手することは認めません。
  - 開発ウォークスルーの該当フェーズのみを必ず更新すること。更新に際には該当フェーズより前のフェーズの修正は認めません。以前のフェーズの内容を変更する必要があった場合は、変更内容は現在作業中フェーズの記載場所に実装済み機能の変更として変更内容を記載することとする。
  - 開発計画(implementation_plan.md)は該当フェーズの詳細な開発内容に全文を更新すること。開発計画は、できる限り詳細な内容とし、ユーザーに承認を得ること。承認されたファイルはファイルに承認済みの記載を行うこと。
- コード作成中にプランが大きく変わった場合や機能追加した場合：
  - タスク、プラン、ウォークスルー、設計書等の計画・進捗を記載しているもの**全てを変更・追加**し、ユーザーに了承を得てからコード作成を行う。了承を得ずに大きなプラン変更は絶対に行わないものとする。
  - タスク、プラン、ウォークスルー、設計書等の内容を更新する場合は、以前の作業の内容が記載された部分は削除してはならない。
- タスク、プラン、ウォークスルー、設計書等に進捗記載があるものは開発が進むたびに**必ず進捗状態を更新**する

### 4. テスト・動作確認ポリシー
- 各フェーズの完了前、または大きな機能の実装・変更の後には**必ず動作確認テストを工程として入れる**
- 大きくUIを変更、または要素を追加した場合、は必ずその直後に動作確認工程でエミュレータまたは実機での確認を行うこととする。
- 大きな変更や分岐点と判断した場合は、エージェントの判断で自動的に動作確認を行うこととする。
- ビルドの成功だけでは動作確認に合格したとは認めない。
- 動作確認テストは、ユーザーの指示がない限り、自動的に動作確認を行うが、最終的な確認は必ずユーザーが行うものとする。
- 動作確認テストは、ユーザーが明確に、動作確認したが問題ない旨を報告するか、動作確認は合格と報告しない限り終了をしないこと。
- **動作確認が終わるまでは、該当機能の実装は完了として進捗状態を更新してはならない**

### 5. Git/GitHub版管理ポリシー
- 更新管理及び版管理を**GitHubで可逆可能な状態**で行う
- 自動的に更新管理及び版管理を行う
- **各フェーズの完了時**またはユーザーからの更新管理及び版管理の指示時には**必ずGitHubを可逆可能な状態で管理**する
- 更新管理及び版管理の際はREADME.mdを更新する
- 大きな変更や分岐点と判断した場合は、エージェントの判断で自動的に更新管理及び版管理しても構わない
- GitHubのコミットメッセージは日本語で行うこと
- GitHubのコミットする場合は、更新忘れを防止するためコミット前にREADME.mdを更新する（例外的にREADME.mdに記載する内容が無い場合は更新不要とします。）

### 6. デバッグポリシー
- デバッグは自動的に行う
- デバッグの際に問題が発生した場合は、ユーザーに報告する
- ビルドデバックは必ず進捗を監視し、通常よりも長時間進捗しない場合は、ビルド作業を中止可能ならビルドを一旦中止し、自動で対策を行って再ビルドを行うこととする。

### 7.ログの作成
- LLMとのやり取りはログとして保存すること。保存に関しては以下にて行うこと。　
  - **トリガー**: セッション終了時（フェーズクローズ完了後）
  - **記録内容**:
  　- できる限り、全文を保存すること。 
    - 出来ない場合は以下の情報を最優先で保存すること
      - セッション中の重要なやり取り（決定事項、設計議論、問題解決の経緯）
      - 実施したタスク
      - 試行錯誤・デバッグ内容
      - 動作確認結果
      - 未解決課題
  - **ユーザー作業を通知**: LLMはセッション終了時にユーザーへ会話エクスポートを依頼し、完全な記録の保存または保存されたことを確認するよう促すこと


### 8. ポリシー維持
- 以上の項目は**いかなる場合もユーザーが明確に指示しない限り解除できない**

---

最終更新: 2026-01-02
