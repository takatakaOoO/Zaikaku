# 開発ポリシー

## 本ポリシーの遵守と適応範囲
このファイルは開発にかかわるLLMエージェントが開発中に絶対に遵守すべきポリシーを定義しています。
- **人間が直接コードを生成または修正する場合は本ポリシーは適用されません。**
- **ユーザーが直接編集するか、ユーザーからの明確な指示がない限り、これらのポリシーは変更・解除できません。**
- **コード作成するLLMエージェントは現在のプロジェクトのすべての作業に当たり以下のポリシーの厳守を必須とします。**
- **本文中で矛盾が生じた場合はより前項に記載されている内容を優先する。**
- 一度承認されたタスク、ウォークスルーファイルの内容を削除することを禁じます。変更があった場合は、変更箇所が分かるように取り消し線などを活用し履歴が把握できるように変更すること。
- エージェントは思考、処理、作業を行うたびに本ポリシーの内容の優先度が下がっていってしまう場合は、作業のたびにポリシーの全文を把握、確認してから作業を行うこと。
- 本ポリシーに矛盾した指示がユーザーからあった場合は、必ずユーザーにポリシー違反の旨を必ず説明し、それでもユーザーが明確に了承した場合にのみ、ユーザーの指示に従う。
- 本ポリシーは最優先とします。準じない作業は厳重に禁止します。疑問点、矛盾点、不明点がある場合は初回読み込み時に、その旨をユーザーに説明し、必ず事前にユーザーの確認を仰ぐこと。（本文の矛盾、不明点が指摘された場合はユーザーは矛盾点、不明点を直ちに是正すること）また、Agentが以降の作業で必ず順守し実行できると判断、確信できた場合は、本ファイルの文末に確認できる旨を追記し、署名と日時を記載すること。


## 開発管理ファイルとその保存場所
コード生成の際に以下のファイルを参照する。
同名ファイルが複数ある場合は下記のもののみ使用すること。

- 開発管理ファイル保存場所
  /docs/
- 本ポリシー
  /docs/LLM_DEVELOPMENT_POLICY.md
- 開発タスク
  /docs/Task.md
- 実装計画書
  /docs/implementation_plan.md
- 開発ウォークスルー
  /docs/walkthrough.md
- 設計書
  /docs/design.md
LLM開発ログ
  /LLM_Agent_Logs/

## 必須ポリシー

### 1. コード生成ポリシー
- コード生成は、ユーザーの指示に従って行うこと。
- ユーザーの指示が不明確な場合は、ユーザーに確認を求めること。
- ユーザーの指示が本ポリシーに矛盾する場合は、ユーザーにポリシー違反の旨を必ず説明し、それでもユーザーが明確に了承した場合にのみ、ユーザーの指示に従う。

### 2. 言語ポリシー
- 返答、指示、設計書、開発タスク、実装計画書、開発ウォークスルー、思考プロセスの表示、コード内のコメントは必ず**全て日本語**で行うこと
- 例外: UIのボタンなどに使う簡単な単語レベルの英語は使用可

### 3. 計画・進捗管理ポリシー
- 承認済みのファイルは容易に内容の削除を行わないこと。変更があった場合は、変更箇所が分かるように取り消し線などを活用し履歴が把握できるように変更することとする。ただし、新しフェーズに着手する際の開発計画書(docs/implementation_plan.md)の内容更新作業は例外とする。
- 開発作業は以下の手順を順守すること。
  - 新しいプロジェクトに着手する場合(プロジェクト作成手順) ：コード生成に先立ち下記の順番で工程を確実に行なう事。
    1.（調査）将来的な拡張性を考慮し、採用するライブラリ、フレームワーク、アーキテクチャ、プログラミング言語、開発環境、開発ツール、マルチランゲージ対応などを調査し、ユーザーに提案すること。その際、必要な情報が不足している場合は、ユーザーに適切な質問を行い、必要な情報を収集すること。
    2.（承認）前項で提案した内容の確認と承認をユーザに求める。ユーザーが承認を行わないと次の工程へは進めないものとする。
    3.（タスク作成）コード生成に先立ち、完成までの全ての作業を想定し全ての作業をフェーズごとに分類し記載した開発タスク（docs/Task.md）ファイルを作成すること。作成するタスクファイルは進捗管理可能な形式とすること。また、フェーズごとにタスクを分類する際は、フェーズの名称を明確にすること。各フェーズの工程順は”フェーズ作業の手順”の工程順を守って作成すること。また、開発タスクの作成日時を記載すること。
    4.（承認）開発タスクの内容の確認と承認をユーザーに求める。開発タスクの内容をユーザーが承認を行わないと次の工程へは進めないものとする。また、明確にユーザーが”承認”と指示しない限り承認したとは認めません。また、承認されたファイルには明確に承認済みである旨を記載すること。承認したファイルには承認日時も記載すること。
    5.（開発ウォークスルー、実装計画書作成）開発タスクに基づき、開発ウォークスルー(docs/Walkthrough.md)ファイルおよび実装計画書(docs/implementation_plan.md)ファイルを作成すること。
    6.（承認）作成した開発ウォークスルー、実装計画書ファイルの内容の確認と承認をユーザーに求める。開発ウォークスルー、実装計画書ファイルの内容をユーザーが承認を行わないと次の工程へは進めないものとする。また、明確にユーザーが”承認”と指示しない限り承認したとは認めません。また、承認されたファイルには明確に承認済みである旨を記載すること。承認したファイルには承認日時も記載すること。
    7.（設計書作成）必要と判断した場合は、開発ウォークスルー、実装計画書に基づき、設計書(docs/design.md)ファイルを作成すること。
    8.（承認）作成した設計書の内容の確認と承認をユーザーに求める。設計書のファイルの内容をユーザーが承認を行わないと次の工程へは進めないものとする。また、明確にユーザーが”承認”と指示しない限り承認したとは認めません。また、承認されたファイルには明確に承認済みである旨を記載すること。承認したファイルには承認日時も記載すること。
    9.(次の工程へ進む)新フェーズに着手する

  - フェーズ作業の手順(フェーズスタートからフェーズクローズまでの流れ)：フェーズ中の作業は下記の順番で工程を確実に行なうこと。
    1.(前フェーズの終了確認)作業を行なおうとしているフェーズの前フェーズの工程が全て完了していることを確認する。もし、前フェーズの工程が全て完了していない場合は、ユーザーに報告し、対応方法を確認すること。
    2.(フェーズスタート)まず、開発タスクに記載されている内容から該当フェーズでの実装計画書(/doc/implementation_plan.md)を作成しする。実装計画書は、作業予定、作業内容を可能な限り詳細の記載し、工程が多い場合、ステップを踏みながら作業を進める必要がある場合は、進捗管理を行なえるように作成すること。また、必ずその工程の着手時、完了時に進捗を管理、更新し着手中と完了済みが分かるようにすること。大まかな工程の流れは、このフェーズ作業の手順の工程順を守って作成すること。
    3.(実装計画書承認)作成した実装計画書の内容の確認と承認をユーザーに求める。実装計画書の内容をユーザーが承認を行わないと次の工程へは進めないものとする。また、明確にユーザーが”承認”と指示しない限り承認したとは認めません。また、承認されたファイルには明確に承認済みである旨を記載すること。承認したファイルには承認日時も記載すること。
    4.(コード生成)実装計画書に基づき、コードを生成する。
    5.(コードのビルドと動作確認)ビルドは”7. ビルド・実行ポリシー”に従って実行すること。
    6.(動作検証とUI確認)windows用以外のコードはできるだけエミュレータ上で動作確認を前提とする。ただし、エミュレータでは確認できない機能については、実機で動作確認を行なうことし、タスクファイルの工程は分けて記載すること。動作確認は"5. テスト・動作確認ポリシー"に従うこと。
    7.(動作検証の終了確認)動作検証が全て完了したことをユーザーに報告し、承認を得る。
    8.(フェーズクローズ)フェーズクローズの際は必ず、フェーズクローズする旨をユーザーに報告し、承認を得る。また、開発タスクファイルに記載してある現在のフェーズの全てのタスクが終了またはキャンセルされていない場合はフェーズクローズに着手できないものとする。
    9.(開発ウォークスルーの更新)開発ウォークスルーファイルを更新する。更新に際には該当フェーズより前のフェーズの修正は認めません。以前のフェーズの内容を変更する必要があった場合は、変更内容は現在作業中フェーズの記載場所に実装済み機能の変更として変更内容を記載することとする。また、追加されたファイル（ツリー形式）、修正されたファイル、削除したファイル（ツリー形式）、該当フェーズで行った主要作業の内容を必ず記載すること。
    10.(版管理)版管理を”6. Git/GitHub版管理ポリシー”に従って行なうこと。
    11.(AgentLogの保存)”8. AgentLogの作成ポリシー”に従ってAgentLogを保存すること。
    12.フェーズクローズ作業の終了報告を必ず行ない、承認を得ること。
    13.(次の工程へ進む)新フェーズに着手する

### 4. 計画の変更,または機能の追加ポリシー  
- コード作成中に実装計画が大きく変わった場合や機能追加した場合、または設計書が大きく変わった場合はいかにしたがって計画の修正を行なう事
  - タスク、実装計画、ウォークスルー、設計書等の計画・進捗を記載しているもの**全てを変更・追加**し、ユーザーに了承を得てからコード作成を行う。了承を得ずに大きなプラン変更は絶対に行わないものとする。
  - タスク、実装計画、ウォークスルー、設計書等の内容を更新する場合は、以前の作業の内容が記載された部分は削除してはならない。
- タスク、実装計画、ウォークスルー、設計書等に進捗記載があるものは開発が進むたびに**必ず進捗状態を更新**する

### 5. テスト・動作確認ポリシー
- 各フェーズの完了前、または大きな機能の実装・変更の後には**必ず動作確認テストを工程として入れる**
- 大きくUIを変更、または要素を追加した場合、は必ずその直後に動作確認工程でエミュレータまたは実機での確認を行うこととする。
- 大きな変更や分岐点と判断した場合は、エージェントの判断で自動的に動作確認を行うこととする。
- ビルドの成功だけでは動作確認に合格したとは認めない。
- 動作確認テストは、ユーザーの指示がない限り、自動的に動作確認を行うが、最終的な確認は必ずユーザーが行うものとする。
- 動作確認テストは、ユーザーが明確に、動作確認したが問題ない旨を報告するか、動作確認は合格と報告しない限り終了をしないこと。
- **動作確認が終わるまでは、該当機能の実装は完了として進捗状態を更新してはならない**

### 6. Git/GitHub版管理ポリシー
- 版管理を**GitHubで可逆可能な状態**で行う
- 自動的に版管理を行う
- **各フェーズの完了時**またはユーザーからの版管理の指示時には**必ずGitHubを可逆可能な状態で管理**する
- 版管理の際はREADME.mdを更新する。
- 大きな変更や分岐点と判断した場合は、エージェントの判断で自動的に版管理しても構わない
- GitHubのコミットメッセージは日本語で行うこと
- GitHubのコミットする場合は、更新忘れを防止するためコミット前にREADME.mdを更新する（例外的にREADME.mdに記載する内容が無い場合は更新不要とします。）
- GitHubでの版管理の際は、広告IDやAPIキーなどの個人情報や機密情報を含まないようにすること

### 7. ビルド・実行検証ポリシー
- ビルドは自動的に行う
- ビルド時に問題が発生した場合は、ユーザーに報告する
- ビルドは必ず進捗を監視し、通常よりも長時間進捗が確認できない場合、ビルドを中止可能ならビルドを一旦中止し、自動で対策を行って再ビルドを行うこととする。
- ビルド完了後は該当フェーズでの実装が簡単な内容、またはUIに影響がない場合、自動で動作検証、コードバグの確認を行なう事。
- 自動検証が問題なく完了した場合は、検証内容をユーザーに報告する。微細な問題は修正し、検証内容と修正内容をユーザーに報告する。重大な問題が発生した場合は即時修正は避け、複数の対策案を提案してユーザーに指示を仰ぐこと。

### 8.AgentLogの作成ポリシー
- LLMとのやり取りはログとして保存すること。保存に関しては以下にて行うこと。　
  - **トリガー**: セッション終了時（フェーズクローズ完了後）
  - **保存場所**: /LLM_Agent_Logs/
  - **記録内容**:
  　- できる限り、全文を保存すること。 
    - 出来ない場合は以下の情報を最優先で保存すること
      - セッション中の重要なやり取り（決定事項、設計議論、問題解決の経緯）
      - 実施したタスク
      - 試行錯誤・デバッグ内容
      - 動作確認結果
      - 未解決課題
  - **ユーザー作業を通知**: LLMはセッション終了時にユーザーへ会話のエクスポートを依頼し、完全な記録の保存または保存されたことを確認するよう促すこと

### 9. ポリシー維持
- 以上の項目は**いかなる場合もユーザーが明確に指示しない限り解除できない**

---

最終更新: 2026-02-01
