# 実装計画書 - Phase 8: ストア審査と公開

**作成日**: 2026-02-01  
**フェーズ**: Phase 8 - Google Play Storeへの公開  
**状態**: 承認済み  
**承認日時**: 2026-02-01 19:09

---

## 目標

Google Play Storeに「材確」アプリを正式公開し、エンドユーザーがダウンロード・利用可能な状態にすること。

---

## User Review Required

> [!IMPORTANT]
> **本フェーズの特性について**:
> - Phase 8は主に**ユーザー様の手作業**が中心となります（Google Play Console上での登録・設定作業）
> - LLMエージェントは、必要なドキュメント・素材の準備、手順ガイドの提供、問題発生時のサポートを行います
> - 審査には数日〜数週間かかる場合があります

> [!WARNING]
> **初回公開時の要件**:
> - Google Playの初回審査では、20人以上のテスターによるクローズドテストが必須となる場合があります
> - 開発者アカウントの身分証明書提出が求められることがあります
> - プライバシーポリシーの公開URL（GitHub Pages等）が必要です

> [!CAUTION]
> **AdMob App IDについて**:
> - ストアアップロード時には、本番用AdMob App IDを`key.properties`に設定し、`--dart-define`で注入する必要があります
> - テスト用IDのままアップロードしないよう注意してください

---

## Proposed Changes

本フェーズでは、コード変更は原則として発生しません。以下の作業を順次実施します。

### ステップ1: 事前準備と最終確認

#### 1.1 リリースビルドの最終確認
- [x] Phase 7で生成したAABファイルの存在確認
  - パス: `build/app/outputs/bundle/release/app-release.aab`
  - サイズ: 約71.2MB
- [x] 本番用AdMob App IDが正しく注入されていることの確認
- [x] ProGuard難読化が有効になっていることの確認

#### 1.2 必要素材の準備確認
- [x] **アプリアイコン**: 512x512px（高解像度版）の準備
  - 既存: `assets/icon/icon.png` (1024x1024) から変換可能
- [x] **スクリーンショット**: 最低2枚、推奨4-8枚
  - 推奨サイズ: 1080x1920px (縦) または 1920x1080px (横)
  - 必要画面: ホーム画面、スキャン画面、履歴画面、製品マスタ画面など (エミュレータにて4枚撮影済)
- [x] **フィーチャーグラフィック**: 1024x500px（オプションだが推奨）
- [x] **プライバシーポリシーURL**: 公開可能なURL
  - 候補: GitHub Pages（公開完了）

**エージェント作業**: スクリーンショット撮影用のエミュレータ起動支援、アイコンリサイズ支援

---

### ステップ2: Google Play Console登録作業（ユーザー実施）

#### 2.1 アプリの作成
- [x] Google Play Consoleにログイン
- [x] 「アプリを作成」をクリック
- [x] 基本情報の入力:
  - **アプリ名**: 材確
  - **デフォルト言語**: 日本語
  - **アプリまたはゲーム**: アプリ
  - **無料または有料**: 無料

#### 2.2 ストアの掲載情報
- [x] **アプリ名**: 材確 - 現場向け材料照合アプリ (設定完了)
- [x] **簡単な説明**（80文字以内）: 設定完了
- [x] **詳しい説明**（4000文字以内）: 設定完了
- [x] **スクリーンショット**: アップロード完了
- [x] **アプリアイコン**: 512x512pxをアップロード完了
- [x] **フィーチャーグラフィック**: 1024x500pxをアップロード完了

#### 2.3 アプリのカテゴリと連絡先
- [ ] **アプリカテゴリ**: ビジネス
- [ ] **メールアドレス**: サポート用メールアドレス
- [ ] **ウェブサイト**（オプション）

#### 2.4 プライバシーとセキュリティ
- [x] **プライバシーポリシーURL**: 公開URLを入力 (完了)
- [ ] **アプリのカテゴリと連絡先情報**
  - アプリの種類: アプリ
  - カテゴリ: ビジネス
  - タグ: バーコードスキャナー、ビジネス、生産性
- [ ] **行政アプリの宣言**: 「いいえ」
- [ ] **金融取引機能の宣言**: 「該当なし」
- [ ] **健康アプリの宣言**: 「該当なし」
- [/] **データの安全性**: (ガイド提供中)
- [x] **広告**: 「はい」で回答
- [x] **アプリのアクセス権限**: 設定完了

#### 2.5 対象ユーザーとコンテンツ
- [x] **対象年齢**: 18歳以上（設定完了）
- [x] **コンテンツレーティング**: 質問票に回答完了

---

### ステップ3: リリースのアップロード（ユーザー実施）

#### 3.1 トラックの選択
- [x] 「製品版」タブを選択 (完了)
- [x] 新しいリリースを作成 (完了)

#### 3.2 AABファイルのアップロード
- [x] `app-release.aab` をアップロード完了

#### 3.3 リリースノートの記入
- [x] 日本語: 記入完了

#### 3.4 リリースの確認と保存
- [x] 「保存」→「次へ」をクリック完了

---

### ステップ4: 審査と公開（ユーザー実施）

#### 4.1 審査への提出
- [x] 審査へ送信 (2026-02-01 22:14 提出済み)
- [ ] 審査開始の通知メールを確認

#### 4.2 審査期間中
- [ ] 審査状況を定期的に確認（通常1-3日、最大7日程度）
- [ ] 審査通過待ち (ステータス: 審査中)
- [ ] 必要に応じて修正対応 (却下された場合)

#### 4.3 公開
- [ ] 審査通過の通知を受信
- [ ] 「公開」ボタンをクリック
- [ ] ストアへの反映を待つ（数時間）

---

### ステップ5: 公開後の確認（ユーザー実施 + エージェント支援）

#### 5.1 ストア表示確認
- [ ] Google Play Storeで「材確」を検索
- [ ] アプリページが正しく表示されることを確認
  - アイコン、スクリーンショット、説明文等

#### 5.2 インストールテスト
- [ ] ストアからアプリをインストール
- [ ] 起動確認
- [ ] 主要機能の動作確認:
  - バーコードスキャン
  - 製品マスタ登録
  - 履歴表示とエクスポート
  - AdMob広告の表示

#### 5.3 ドキュメント更新（エージェント作業）
- [ ] `Task.md` のPhase 8を完了済みに更新
- [ ] `Walkthrough.md` にPhase 8の成果を記録
- [ ] `README.md` に公開情報を追加
- [ ] GitHub へのコミット・プッシュ

---

## Verification Plan

### Manual Verification（ユーザー実施）

#### ストア登録の検証
- [ ] Google Play Console上で全ての必須項目が緑色のチェックマークになっていること
- [ ] AABアップロード時にエラーが発生しないこと
- [ ] 審査に提出できる状態になっていること

#### 公開後の検証
- [ ] ストアページが意図通りに表示されること
- [ ] ストアからインストールしたアプリが正常に動作すること
- [ ] AdMob広告が本番用IDで表示されること

### Automated Tests（エージェント支援）

#### ドキュメント整合性確認
- [ ] 全ての管理ファイル（Task.md, Walkthrough.md, README.md）が最新状態に更新されていること
- [ ] Git履歴に機密情報が含まれていないこと

---

## エージェントサポート範囲

本フェーズでエージェントが実施可能な作業:

1. **素材準備支援**:
   - アプリアイコンのリサイズ（512x512px）
   - スクリーンショットの撮影（エミュレータ使用）
   - フィーチャーグラフィックの生成

2. **ドキュメント作成**:
   - ストア掲載用の詳細説明文のドラフト作成
   - リリースノートのドラフト作成

3. **最終確認**:
   - AABファイルの存在確認
   - Git履歴のセキュリティチェック

4. **公開後作業**:
   - Task.md, Walkthrough.md, README.md の更新
   - 開発ログの保存
   - GitHubへのコミット

---

## リスクと対策

| リスク | 影響 | 対策 |
|--------|------|------|
| 審査却下 | 公開遅延 | 却下理由を精査し、速やかに修正・再提出 |
| AdMob ID設定ミス | 広告未表示 | ビルド前に`key.properties`の内容を再確認 |
| プライバシーポリシーURL未設定 | 審査ブロック | 事前にGitHub Pages等で公開 |
| スクリーンショット不足 | 審査遅延 | 最低4枚以上を準備 |

---

## 次フェーズへの移行条件

以下の全てが完了した時点でPhase 8完了とします:

- [ ] Google Play Storeでアプリが公開され、一般ユーザーがダウンロード可能になっている
- [ ] ストアからインストールしたアプリの動作確認が完了している
- [ ] 全ての管理ドキュメントが更新されている
- [ ] GitHubに最新状態がコミット・プッシュされている

---

**計画策定日**: 2026-02-01  
**策定者**: LLM Agent (Antigravity)
